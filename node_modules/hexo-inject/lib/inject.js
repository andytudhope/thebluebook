'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _dec, _class;

var _underscore = require('underscore');

var _underscore2 = _interopRequireDefault(_underscore);

var _coreDecorators = require('core-decorators');

var _mixin = require('./mixin');

var _const = require('./const');

var _util = require('./util');

var _loader = require('./loader');

var _loader2 = _interopRequireDefault(_loader);

var _router = require('./router');

var _router2 = _interopRequireDefault(_router);

var _builtIn = require('./loader/built-in');

var _builtIn2 = _interopRequireDefault(_builtIn);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var Inject = (_dec = (0, _coreDecorators.mixins)(_mixin.Content, _mixin.Register, _mixin.Transform, _mixin.Require), _dec(_class = function () {
  function Inject(hexo) {
    _classCallCheck(this, Inject);

    this.hexo = hexo;
    this.loader = new _loader2.default(hexo);
    (0, _builtIn2.default)(this.loader);
    this.router = new _router2.default(hexo);
    this._initAPI();
  }

  _createClass(Inject, [{
    key: '_initAPI',
    value: function _initAPI() {
      var _this = this;

      this._injectors = {};
      _const.INJECTION_POINTS.forEach(function (i) {
        _this._injectors[i] = [];
        var api = _this[(0, _util.camalize)(i)] = _underscore2.default.chain(_this).pick(_const.API).mapObject(function (fn) {
          return function () {
            for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
              args[_key] = arguments[_key];
            }

            fn.call.apply(fn, [_this, i].concat(args));
            return api;
          };
        }).value();
      });
    }
  }]);

  return Inject;
}()) || _class);
exports.default = Inject;
module.exports = exports['default'];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluamVjdC5lczYiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQTs7OztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7Ozs7Ozs7SUFJcUIsaUJBRHBCO0FBRUMsV0FEbUIsTUFDbkIsQ0FBYSxJQUFiLEVBQW1COzBCQURBLFFBQ0E7O0FBQ2pCLFNBQUssSUFBTCxHQUFZLElBQVosQ0FEaUI7QUFFakIsU0FBSyxNQUFMLEdBQWMscUJBQVcsSUFBWCxDQUFkLENBRmlCO0FBR2pCLDJCQUFzQixLQUFLLE1BQUwsQ0FBdEIsQ0FIaUI7QUFJakIsU0FBSyxNQUFMLEdBQWMscUJBQVcsSUFBWCxDQUFkLENBSmlCO0FBS2pCLFNBQUssUUFBTCxHQUxpQjtHQUFuQjs7ZUFEbUI7OytCQVFQOzs7QUFDVixXQUFLLFVBQUwsR0FBa0IsRUFBbEIsQ0FEVTtBQUVWLDhCQUFpQixPQUFqQixDQUF5QixVQUFDLENBQUQsRUFBTztBQUM5QixjQUFLLFVBQUwsQ0FBZ0IsQ0FBaEIsSUFBcUIsRUFBckIsQ0FEOEI7QUFFOUIsWUFBSSxNQUFNLE1BQUssb0JBQVMsQ0FBVCxDQUFMLElBQW9CLHFCQUFFLEtBQUYsUUFDM0IsSUFEMkIsYUFFM0IsU0FGMkIsQ0FFakIsVUFBQyxFQUFEO2lCQUFRLFlBQWE7OENBQVQ7O2FBQVM7O0FBQzlCLGVBQUcsSUFBSCxtQkFBYyxVQUFNLEtBQXBCLEVBRDhCO0FBRTlCLG1CQUFPLEdBQVAsQ0FGOEI7V0FBYjtTQUFSLENBRmlCLENBTTNCLEtBTjJCLEVBQXBCLENBRm9CO09BQVAsQ0FBekIsQ0FGVTs7OztTQVJPIiwiZmlsZSI6ImluamVjdC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBfIGZyb20gXCJ1bmRlcnNjb3JlXCJcclxuaW1wb3J0IHsgbWl4aW5zIH0gZnJvbSAnY29yZS1kZWNvcmF0b3JzJ1xyXG5pbXBvcnQgeyBDb250ZW50LCBSZWdpc3RlciwgVHJhbnNmb3JtLCBSZXF1aXJlIH0gZnJvbSAnLi9taXhpbidcclxuaW1wb3J0IHsgSU5KRUNUSU9OX1BPSU5UUywgQVBJIH0gZnJvbSAnLi9jb25zdCdcclxuaW1wb3J0IHsgY2FtYWxpemUgfSBmcm9tICcuL3V0aWwnXHJcbmltcG9ydCBMb2FkZXIgZnJvbSAnLi9sb2FkZXInXHJcbmltcG9ydCBSb3V0ZXIgZnJvbSAnLi9yb3V0ZXInXHJcbmltcG9ydCByZWdpc3RlckJ1aWx0SW5Mb2FkZXIgZnJvbSAnLi9sb2FkZXIvYnVpbHQtaW4nXHJcblxyXG5cclxuQG1peGlucyhDb250ZW50LCBSZWdpc3RlciwgVHJhbnNmb3JtLCBSZXF1aXJlKVxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBJbmplY3Qge1xyXG4gIGNvbnN0cnVjdG9yIChoZXhvKSB7XHJcbiAgICB0aGlzLmhleG8gPSBoZXhvXHJcbiAgICB0aGlzLmxvYWRlciA9IG5ldyBMb2FkZXIoaGV4bylcclxuICAgIHJlZ2lzdGVyQnVpbHRJbkxvYWRlcih0aGlzLmxvYWRlcilcclxuICAgIHRoaXMucm91dGVyID0gbmV3IFJvdXRlcihoZXhvKVxyXG4gICAgdGhpcy5faW5pdEFQSSgpXHJcbiAgfVxyXG4gIF9pbml0QVBJICgpIHtcclxuICAgIHRoaXMuX2luamVjdG9ycyA9IHt9XHJcbiAgICBJTkpFQ1RJT05fUE9JTlRTLmZvckVhY2goKGkpID0+IHtcclxuICAgICAgdGhpcy5faW5qZWN0b3JzW2ldID0gW11cclxuICAgICAgbGV0IGFwaSA9IHRoaXNbY2FtYWxpemUoaSldID0gXy5jaGFpbih0aGlzKVxyXG4gICAgICAgIC5waWNrKEFQSSlcclxuICAgICAgICAubWFwT2JqZWN0KChmbikgPT4gKC4uLmFyZ3MpID0+IHtcclxuICAgICAgICAgIGZuLmNhbGwodGhpcywgaSwgLi4uYXJncylcclxuICAgICAgICAgIHJldHVybiBhcGlcclxuICAgICAgICB9KVxyXG4gICAgICAgIC52YWx1ZSgpXHJcbiAgICB9KVxyXG4gIH1cclxufVxyXG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
